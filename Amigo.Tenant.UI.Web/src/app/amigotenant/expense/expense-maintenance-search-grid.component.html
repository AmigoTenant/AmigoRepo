<biz-val [successFlag]="successFlag" [successMessage]="successMessage" [errorMessages]='errorMessages'>
</biz-val>
<div class="grid-container" style="padding-left: 20px; padding-right: 20px">
    <input type="button" class="ro-button btn-success" value="Add Expense Detail" (click)="onAddDetail()" />
    <input type="button" class="ro-button btn-primary" value="Migrate Expense To Payment" (click)="onChangeStatus()" />
</div>
<div class="row">&nbsp;</div>
<div class="grid-container" style="padding-left: 20px; padding-right: 20px">
    <kendo-grid id="kgrid-ExpenseDetail" [data]="expenseDetailData" [selectable]="false">
        <kendo-grid-column [width]="50">
            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                <div class="text-center">
                    <input type="checkbox" id="HeaderTemplate" style="zoom:1.3" value="option"
                        (change)="changeItemHeader()" />
                </div>
            </ng-template>
            <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                <input class="ro-checkbox" type="checkbox" id="{{rowIndex}}" value="option"
                    [checked]="dataItem.isSelected" (change)="changeItem(dataItem)" />
                <label htmlFor="{{rowIndex}}"></label>
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="conceptName" title="Concept"></kendo-grid-column>
        <kendo-grid-column field="remark" title="Remark"></kendo-grid-column>
        <kendo-grid-column field="tenantFullName" title="Tenant"></kendo-grid-column>
        <kendo-grid-column title="Status">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div>
                    <span class="row" *ngIf="dataItem.expenseDetailStatusName=='MIGRATED'">
                        <label class="label-status approved">{{dataItem.expenseDetailStatusName}}</label>
                    </span>
                    <span class="row" *ngIf="dataItem.expenseDetailStatusName!='MIGRATED'">
                        <label class="label-status pending">{{dataItem.expenseDetailStatusName}}</label>
                    </span>
                </div>
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="subTotalAmount" title="Sub Total">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div>
                    <span class="float-right">{{dataItem.subTotalAmount|number:"1.2-2" }}</span>
                    <br />
                </div>
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="tax" title="Tax">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div>
                    <span class="float-right">{{dataItem.tax|number:"1.2-2" }}</span>
                    <br />
                </div>
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="totalAmount" title="Total">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div>
                    <span class="float-right">{{dataItem.totalAmount|number:"1.2-2" }}</span>
                    <br />
                </div>
            </ng-template>
        </kendo-grid-column>

        <kendo-grid-column>
            <ng-template kendoGridCellTemplate let-dataItem>
                <div class="text-right">
                    <button type="button" class="btn-icon" (click)="onEdit(dataItem)">
                        <i class="xico-action-edit"></i>
                    </button>
                    <button type="button" class="btn-icon" (click)="onDelete(dataItem);">
                        <i class="xico-action-remove"></i>
                    </button>
                </div>
            </ng-template>
        </kendo-grid-column>

    </kendo-grid>
</div>

<kendo-dialog *ngIf="openDialog" title="Expense Detail" (close)="closePopup()" style="z-index:10003;"
    id="tenantMaintenancePanel">
    <at-expense-maintenance-detail [inputSelectedExpenseDetail]="selectedDetail"
        (eventoClose)="eventoCloseParent($event)" [inputPaymentTypeId]="paymentTypeId">
    </at-expense-maintenance-detail>
</kendo-dialog>

<kendo-dialog *ngIf="openChangeStatusConfirmation" title="Expense Detail" (close)="closePopupConfirmation()"
    style="z-index:10003;" [minWidth]="250" [width]="450">
    <div>{{ messageToMigrate }}</div>
    <kendo-dialog-actions>
        <button class="k-button" (click)="close('no')">No</button>
        <button class="k-button k-primary" (click)="acceptChangeStatus()">Yes</button>
    </kendo-dialog-actions>
</kendo-dialog>

<kendo-dialog *ngIf="openDeleteConfirmation" title="Delete" (close)="closeDelete()"
    style="z-index:10003;" [minWidth]="250" [width]="450">
    <div>{{ messageToDelete }}</div>
    <kendo-dialog-actions>
        <button class="k-button" (click)="closeDelete()">No</button>
        <button class="k-button k-primary" (click)="acceptDelete()">Yes</button>
    </kendo-dialog-actions>
</kendo-dialog>