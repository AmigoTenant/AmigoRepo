<div class="ro-tab tabs-top">
    <ul class="nav-tabs">
        <li>
            <input type="radio" name="tabsHeader" id="tab1Main" class="tab-check" checked />
            <label for="tab1Main">Asignacion<span class="tab-counter">{{totalResultCount}}</span></label>
            <div class="tab-content">
                <div class="tab-pane">
                    <form [formGroup]="expenseSearchForm">
                        <div class="filter-bar form-horizontal">
                            <div class="row">
                                <div class="col-lg-10 col-md-10 col-sm-10">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="driver" class="col-sm-5 control-label">Property Type</label>
                                                <label class="col-sm-7">
                                                    <select class="form-control" formControlName="houseTypeId"
                                                            name="houseTypeId">
                                                        <option value=""></option>
                                                        <option *ngFor="let houseType of _listHouseTypes" [ngValue]='houseType.id'>
                                                            {{houseType.name}}
                                                        </option>
                                                    </select>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Property Name</label>
                                                <label class="col-sm-7">
                                                    <input type="text" name="propertyName" class="form-control" formControlName="propertyName" />
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Date From</label>
                                                <label class="ro-calendar col-sm-7">
                                                    <input class="form-control" [placeholder]="localization.dateFormat" name="expenseDateFrom" ngbDatepicker #d1="ngbDatepicker"
                                                           [outside-click]="d1" [(ngModel)]="modelExpenseDateFrom" formControlName="expenseDateFrom" >
                                                    <span class="ro-calendar-btn" (click)="d1.toggle()"><i class="xico-ui-calendar" style="width:30px"></i></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Date To</label>
                                                <label class="ro-calendar col-sm-7">
                                                    <input class="form-control" [placeholder]="localization.dateFormat" name="ExpenseDateTo" ngbDatepicker #d2="ngbDatepicker"
                                                        [outside-click]="d2" [(ngModel)]="modelExpenseDateTo" formControlName="expenseDateTo">
                                                    <span class="ro-calendar-btn" (click)="d2.toggle()"><i class="xico-ui-calendar" style="width:30px"></i></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Periodo</label>
                                                <label class="col-sm-7">
                                                    <ngbd-typeahead-period (modelOutput)="getPeriod($event)" [currentPeriod]="_currentPeriod"></ngbd-typeahead-period>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Reference No</label>
                                                <label class="col-sm-7">
                                                    <input type="text" name="referenceNo" class="form-control" formControlName="referenceNo" />
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Total Amount From</label>
                                                <label class="col-sm-7">
                                                    <input type="number" name="totalAmountFrom" class="form-control" formControlName="totalAmountFrom" />
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Total Amount To</label>
                                                <label class="col-sm-7">
                                                    <input type="number" name="totalAmountTo" class="form-control" formControlName="totalAmountTo" />
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Payment Type</label>
                                                <label class="col-sm-7">
                                                    <select name="ConceptId" formControlName ="paymentTypeId"
                                                            class="form-control input-control">
                                                        <option value=""></option>
                                                        <option *ngFor="let paymentType of _listPaymentTypes" [ngValue]="paymentType.typeId">
                                                            {{paymentType.name}}
                                                        </option>
                                                    </select>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Concept</label>
                                                <label class="col-sm-7">
                                                    <input type="text" name="conceptName" class="form-control" formControlName="conceptName" />
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Vendor</label>
                                                <label class="col-sm-7">
                                                <select class="form-control" formControlName="businessPartnerId">
                                                    <option value=""></option>
                                                    <option *ngFor="let bp of _listBusinessPartner" [ngValue]="bp.businessPartnerId">
                                                    {{bp.name}}
                                                    </option>
                                                </select>
                                            </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">File Name</label>
                                                <label class="col-sm-7">
                                                    <input type="text" name="fileName" class="form-control" formControlName="fileName" />
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="from" class="col-sm-5 control-label">Tenant</label>
                                                <label class="col-sm-7">
                                                    <input type="text" name="tenantFullName" class="form-control" formControlName="tenantFullName" />
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-2 text-right">
                                    <div class="button-container">
                                        <button type="submit" id="btnSearch" (click)="onSelect()" class="ro-button btn-primary">Search</button>
                                    </div>
                                    <div class="button-container">
                                        <button type="button" class="ro-button btn-default" (click)="onReset()">Clear</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="action-bar">
                            <div class="button-container">
                                <button type="button" (click)="onAddExpense()" class="ro-button btn-success">
                                        <i class="xico-action-edit"></i>
                                        Agregar Asignacion
                                    </button>
                            </div>
                            <!-- <div class="button-container">
                                <button type="button" id="btnGeneratePayment" class="ro-button btn-default">
                                    <i class="xico-action-mail"></i>
                                    Generate Payment
                                </button>
                            </div> -->
                            <div class="button-container">
                                <button type="button" id="btnExport" (click)="onExport()" class="ro-button btn-default">
                                    <i class="xico-file-download"></i>
                                    Export to Excel
                                </button>
                            </div>
                        </div>
                    </form>
                    <div class="grid-container">
                        <kendo-grid id="kgrid-Contract" [data]="expenseSearchDTOs" [pageSize]="model.pageSize" [skip]="currentPage" [pageable]="{
                                buttonCount: buttonCount,
                                info: info,
                                type: type,
                                pageSizes: pageSizes,
                                previousNext: previousNext
                            }" (pageChange)="pageChange($event)" [selectable]="false">
                            <kendo-grid-column [width]="50">
                                <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                                    <div class="text-center">
                                        <input type="checkbox" id="HeaderTemplate" style="zoom:1.3" value="option" (change)="changeItemHeader()" />
                                    </div>
                                </ng-template>
                                <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                                    <div class="text-center">
                                        <input class="ro-checkbox" type="checkbox" id="{{rowIndex}}" value="option" [checked]="dataItem.isSelected" (change)="changeItem(dataItem)"
                                        />
                                        <label htmlFor="{{rowIndex}}"></label>

                                    </div>
                                </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column field="periodCode" title="Period"></kendo-grid-column>
                            <kendo-grid-column field="paymentTypeName" title="Payment Type"></kendo-grid-column>
                            <kendo-grid-column field="concepts" title="Concept"></kendo-grid-column>
                            <kendo-grid-column field="expenseDate" title="Date">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    <div>
                                        <span>{{dataItem.expenseDate|date:"MM/dd/yyyy" }}</span><br />
                                    </div>
                                </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column field="houseTypeName" title="Property Type"></kendo-grid-column>
                            <kendo-grid-column field="houseName" title="Property"></kendo-grid-column>
                            <kendo-grid-column field="tenants" title="Tenant Name"></kendo-grid-column>

                            <kendo-grid-column field="referenceNo" title="reference No."></kendo-grid-column>
                            <kendo-grid-column field="totalAmount" title="Total Amount"></kendo-grid-column>
                            <kendo-grid-column field="fileNames" title="Files"></kendo-grid-column>
                            

                            <kendo-grid-column>
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    <div class="text-right">
                                        <button type="button" class="btn-icon" (click)="onEdit(dataItem)">
                                            <i class="xico-action-edit"></i>
                                        </button>
                                        <button type="button" class="btn-icon" (click)="onDelete(dataItem);">
                                            <i class="xico-action-remove"></i>
                                        </button>
                                    </div>
                                </ng-template>
                            </kendo-grid-column>

                        </kendo-grid>
                    </div>
                </div>
            </div>
        </li>
    </ul>
</div>
<kendo-dialog title="Confirmation" *ngIf="openedDeletionConfimation" (close)="closeDeletionConfirmation()">
    <div>{{deleteMessage}}</div>
    <kendo-dialog-actions>
        <button type="button" class="k-button" (click)="closeDeletionConfirmation()">No</button>
        <button type="button" class="k-button k-primary" (click)="yesDelete()">Yes</button>
    </kendo-dialog-actions>
</kendo-dialog>
<div>
    <div>
        <at-expense-maintenance></at-expense-maintenance>
    </div>
</div>